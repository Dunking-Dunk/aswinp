import React, { useEffect, useRef } from 'react'
import styled from 'styled-components'
import { useProgress } from "@react-three/drei"
import gsap from 'gsap'

const Loader = () => {
    const containerRef = useRef()
    const ballRef = useRef()
    const { active, progress, errors, item, loaded, total } = useProgress()

    useEffect(() => {
        if (progress >= 100) {
            gsap.to(containerRef.current, {
                duration: 2,
                opacity: 0,
                pointerEvents: 'none',
                ease: 'power4.out'
            })
        }
    }, [progress])

    return <Container ref={containerRef}>
        <Svg viewBox="0 0 379 148" fill="none" xmlns="http://www.w3.org/2000/svg">
            <Path d="M93.1868 0.375C94.8743 0.3125 96.4993 0.375 98.0618 0.5625C98.8743 0.5 99.6868 0.4375 100.499 0.4375C107.124 2.0625 110.812 6.0625 111.562 12.3125C112.374 18.625 111.562 25.8125 109.249 33.8125C106.937 41.75 104.437 49.125 101.749 55.875C101.062 57.75 100.374 59.5625 99.7493 61.1875C100.937 61.0625 101.999 61 102.874 61C107.437 61.5 108.874 64.5 107.312 70C107.187 70.0625 107.124 70.0625 107.062 70.125C103.312 71.5 99.1243 73.375 94.6243 75.6875C91.5618 83.4375 88.2493 92.25 84.6243 102.062C80.9993 111.938 78.0618 121 75.7493 129.25C73.4368 137.562 72.6868 143.25 73.5618 146.375C73.3118 146.375 73.1243 146.312 72.8743 146.312C69.0618 146.125 65.3743 145.25 61.6868 143.688C57.9993 142.125 55.9368 138.688 55.5618 133.312C59.2493 116.125 64.7493 100.75 71.9993 87.1875C73.0618 85 74.0618 82.875 74.9993 80.8125C71.9993 82 68.9368 83.125 65.7493 84.25C61.1868 85.8125 56.9368 87.4375 53.0618 89.125C46.6243 98.0625 40.1243 108.188 33.6243 119.5C27.0618 130.812 23.1243 139.75 21.7493 146.312C20.4368 146.875 19.1243 147.188 17.7493 147.188C14.0618 146.75 10.2493 144.75 6.3743 141.125C2.5618 137.562 0.749304 133.75 0.999304 129.875C4.6868 123.438 8.5618 117.812 12.6868 113.125C15.6868 109.5 19.4368 104.625 23.8118 98.5C23.8118 98.5 23.1868 98.75 21.9368 99.375C20.6868 99.9375 19.0618 100.75 17.1868 101.75C15.2493 102.75 13.2493 103.875 11.1868 105.125C8.4368 103.812 6.3118 101.5 4.8743 98.125C3.4368 94.75 3.3743 91.5625 4.8118 88.5C13.5618 83.5625 22.3118 80 31.1243 77.8125C33.7493 77 36.1243 76.25 38.2493 75.5625C42.0618 69.75 47.1243 61.875 53.3743 52C60.6243 40.5625 67.8743 29.3125 75.1243 18.25C66.9993 21.75 58.9368 27.5 50.9993 35.4375C43.0618 43.375 37.9993 51.6875 35.8743 60.375C30.6868 59.1875 26.8118 56.5625 24.1243 52.5625C21.4993 48.5625 21.4368 44 23.9993 38.875C29.5618 28.9375 38.0618 20.5625 49.5618 13.75C53.8118 11.3125 60.1243 8.5625 68.4993 5.5625C76.8743 2.5625 85.0618 0.8125 93.1868 0.375ZM95.0618 22.875C90.3118 28.75 83.9993 38.4375 76.1243 51.9375C72.8118 57.4375 69.4993 62.875 66.2493 68.0625C68.3743 67.4375 70.4368 66.875 72.4368 66.3125C75.1868 65.625 78.1868 64.75 81.4368 63.75C86.2493 52 89.4368 42.625 90.9993 35.6875C92.1868 31.125 93.5618 26.8125 95.0618 22.875Z" />
            // <Path d="M306.377 53.125C313.19 51.5 318.565 52.125 322.502 55C326.377 57.875 326.69 63.4375 323.315 71.6875C322.377 73.1875 320.94 76.4375 318.877 81.3125C316.815 86.25 314.627 91.625 312.315 97.5C310.065 103.375 308.065 108.5 306.377 112.875C304.752 117.25 303.877 119.437 303.877 119.437C303.877 119.437 305.377 116.687 308.315 111.187C311.252 105.687 314.815 99.125 319.065 91.625C323.252 84.125 327.502 77.0625 331.627 70.5C335.815 63.875 339.252 59.25 341.94 56.5625C347.252 51.875 352.127 50.25 356.502 51.6875C360.877 53.1875 363.565 56.625 364.69 62.125C366.002 66.25 365.44 72.4375 363.065 80.75C360.627 89.0625 357.877 97.4375 354.69 105.937C351.69 113.937 349.627 120.25 348.44 124.875C347.877 127.625 348.19 129.75 349.252 131.25C350.315 132.812 352.065 132.5 354.627 130.437C357.19 128.312 360.377 123.125 364.252 114.937C366.502 110.75 368.752 108.312 371.127 107.5C373.44 106.687 375.377 107.062 376.877 108.562C378.315 110.062 378.877 112.187 378.44 114.937C375.127 125.312 369.94 134.062 362.752 141.375C355.565 148.625 345.69 148.937 333.065 142.375C327.627 136.187 325.94 128.437 328.127 118.937C330.252 109.5 333.315 100.375 337.19 91.6875C339.94 85.3125 341.752 80.125 342.69 76.1875C338.627 82.375 334.065 90.0625 329.002 99.1875C323.94 108.375 319.377 117.125 315.377 125.5C311.377 133.875 308.877 140 308.002 143.812C308.002 143.812 307.94 143.937 307.752 144.25C307.565 144.5 307.315 144.812 306.94 145.125C306.565 145.437 306.065 145.75 305.44 146C304.815 146.187 304.065 146.312 303.252 146.25C302.377 146.187 301.377 145.937 300.252 145.437C299.127 144.937 297.815 144.062 296.377 142.937C294.94 141.812 293.377 140.25 291.627 138.312C286.815 132.687 284.44 126.937 284.627 121.062C284.752 115.187 286.127 108.937 288.69 102.375C289.69 99.6875 290.627 96.875 291.502 94C293.315 88.1875 295.377 82.125 297.627 75.875C299.94 69.625 301.94 64.3125 303.69 59.8125C305.502 55.375 306.377 53.125 306.377 53.125ZM266.312 51.5C270.374 51.625 274.749 52.875 279.437 55.25C284.187 57.6875 286.687 61.8125 286.937 67.75C285.624 71.8125 283.624 77.375 281.062 84.375C277.874 92.9375 274.874 101.5 271.999 110.063C269.187 118.563 267.624 124.75 267.437 128.563C267.499 130.375 268.374 131.5 270.187 131.938C271.937 132.313 274.249 131.25 277.062 128.688C279.937 126.125 283.124 121.5 286.687 114.938C287.624 112.313 289.124 110.75 291.187 110.188C293.249 109.625 295.374 109.563 297.624 110.125C299.812 110.625 300.749 112.188 300.437 114.938C297.249 125 291.624 133.563 283.499 140.688C275.437 147.75 267.562 148.75 259.937 143.563C252.312 138.375 248.874 130.625 249.687 120.375C251.812 101.375 256.187 82.375 262.749 63.3125C263.999 59.375 265.187 55.4375 266.312 51.5ZM283.812 15.4375C284.374 14.8125 285.562 14.9375 287.437 15.6875C289.374 16.5 291.312 17.5625 293.437 18.9375C295.499 20.25 297.124 21.4375 298.249 22.4375C299.687 24.75 299.687 27.9375 298.124 31.8125C296.624 35.75 294.749 39.5625 292.624 43.3125C290.874 46.4375 289.624 48.9375 288.999 50.75C288.999 50.75 288.562 50.5625 287.562 50.25C286.624 49.9375 285.437 49.4375 283.999 48.8125C282.624 48.125 281.187 47.25 279.812 46.125C278.374 45.0625 277.249 43.75 276.249 42.1875C275.062 39.9375 274.749 37.375 275.312 34.375C275.874 31.375 276.812 28.4375 278.124 25.5625C279.499 22.6875 280.749 20.3125 281.999 18.3125C283.187 16.375 283.812 15.4375 283.812 15.4375ZM166.25 53.3125C168 53.375 170.062 54.5 172.375 56.5625C174.625 58.6875 176.375 61.25 177.5 64.375C178.562 67.5 178.25 70.6875 176.5 73.875C172.25 79.5625 169.312 86.3125 167.75 94.125C166.187 101.875 165.375 109 165.312 115.5C165.312 122.062 165.562 126.312 166 128.375C166.812 131.562 168.75 131.062 171.812 126.75C174.875 122.5 178.25 116.188 181.937 107.75C185.562 99.375 188.687 90.6875 191.312 81.5625C193.937 72.5 195.187 64.75 195.125 58.375C201.5 58.4375 207.187 59.4375 212.187 61.3125C214.687 62.25 216.562 63.8125 217.812 65.9375C219.125 68.0625 218.875 70.75 217.125 73.875C216.937 74.0625 216.812 74.25 216.687 74.4375C216.562 74.5625 216.5 74.6875 216.437 74.75C214.687 80.8125 211.75 88.625 207.562 98.1875C206.437 105.25 205.875 111.562 205.937 117.188C206 122.812 206.187 126.562 206.562 128.375C207.437 131.562 209.375 131.062 212.437 126.75C215.5 122.5 218.875 116.188 222.5 107.75C226.187 99.375 229.312 90.6875 231.937 81.5625C234.562 72.5 235.812 64.75 235.75 58.375C242.062 58.4375 247.75 59.4375 252.75 61.3125C257.812 63.1875 259.5 66.5 257.875 71.3125C256.812 76.4375 254.062 84.1875 249.75 94.5625C245.437 104.875 240.437 115 234.812 124.812C229.25 134.688 224 141.438 219.125 145.062C204.562 146.562 195.312 141.375 191.312 129.625C186.75 137.062 182.5 142.188 178.5 145.062C165.875 146.438 157.375 142 152.937 131.812C148.5 121.688 147.375 109.25 149.687 94.5625C152 79.875 156.937 66.375 164.625 54.0625C165 53.5625 165.562 53.3125 166.25 53.3125ZM119.249 124.625C116.749 120.125 114.624 115.062 112.874 109.5C111.437 105.312 109.812 101.125 107.937 97C106.187 88.5 106.937 80.375 110.187 72.6875C113.374 64.9375 119.437 59 128.312 54.9375C134.937 52.375 140.187 51.625 144.124 52.625C148.062 53.625 150.687 54.6875 152.062 55.875C153.499 53.8125 155.124 52.625 156.937 52.4375C158.749 52.25 160.249 52.5625 161.374 53.4375C162.499 54.25 162.749 55.1875 162.124 56.1875C156.062 63.1875 151.124 72.4375 147.312 83.875C145.312 84.0625 143.812 84 142.874 83.5625C141.874 83.1875 141.249 82.625 140.874 82C140.562 81.3125 140.374 80.6875 140.312 80.0625C140.249 79.8125 140.187 79.625 140.124 79.4375C139.937 78.6875 139.999 77.8125 140.249 76.875C140.499 75.9375 140.874 74.9375 141.249 74C141.749 72.875 142.062 71.875 142.249 71C142.374 70.125 142.187 69.5625 141.562 69.1875C140.937 68.875 139.687 69 137.749 69.5C131.124 71.4375 127.562 75.6875 127.124 82.25C126.687 88.75 127.749 95.75 130.312 103.062C132.812 110.438 135.249 116.312 137.499 120.812C139.749 120.688 142.124 120 144.749 118.75C147.312 117.562 149.312 116.375 150.687 115.25C152.062 113.562 153.874 112.5 156.187 112C158.437 111.5 160.249 111.562 161.562 112.25C162.874 112.938 163.499 114.125 163.499 115.875C163.187 119 160.687 122.062 155.812 125.188C150.999 128.25 145.749 130.438 140.124 131.812C140.749 138.188 137.562 142.75 130.499 145.438C123.437 148.125 116.312 147.938 109.124 144.75C101.937 141.625 98.4368 134.438 98.6243 123.312C99.4368 123.438 100.124 123.562 100.812 123.75C103.624 124.375 106.437 124.812 109.124 125.125C111.812 125.375 115.249 125.188 119.249 124.625ZM111.124 135.062C111.874 136.688 113.312 137.812 115.374 138.312C117.437 138.875 119.312 138.875 120.999 138.312C122.687 137.75 123.374 136.625 123.062 134.938C119.999 135.625 117.437 135.875 115.374 135.688C113.374 135.5 111.937 135.312 111.124 135.062Z" />
        </Svg>
        <Ball ref={ballRef} />
    </Container>
}

const Container = styled.div`
    position: fixed;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    z-index: 100;
    background-color: #000000;
    display: flex;
    align-items: center;
    justify-content: center;
`
const Ball = styled.div`
    width: 3rem;
    height: 3rem;
    border-radius: 50%;
    background-color: #ffffff;
`

const Svg = styled.svg`
    width:100rem;
    height: 30rem;
    
    @media (max-width: 600px){
        width:60rem;
    height: 30rem;
    }
`

const Path = styled.path`
    stroke: var(--secondary-color);
    fill: #ffffff;
`


export default Loader